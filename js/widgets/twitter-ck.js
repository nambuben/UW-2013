$(document).ready(function(){var e="https://api.twitter.com/1/statuses/user_timeline.json?callback=?",t="https://api.twitter.com/1/users/profile_image?size=mini&screen_name=";$(".twitter-feed").each(function(){var n=$(this);n.removeAttr("style");var r={include_entities:!0,include_rts:!0,screen_name:n.data("name"),count:n.data("count")};$.getJSON(e,r,function(e){e.reverse();while(e.length){var r=e.pop(),i=r.entities.user_mentions.length>0,s=r.entities.urls.length>0,o=i?t+r.entities.user_mentions[0].screen_name:r.user.profile_image_url_https,u=i?r.entities.user_mentions[0].name:r.user.name,a=i?r.entities.user_mentions[0].screen_name:r.user.screen_name,f=r.text.indexOf("RT")===0,l=r.text,c="";if(f){var h=l.split(":");h.shift();l=h.join(":");c='<small> Retweeted by <a href="//twitter.com/'+r.user.screen_name+'"> @'+r.user.screen_name+"</a></small>"}l=l.replace(/[A-Za-z]+:\/\/[A-Za-z0-9-_]+\.[A-Za-z0-9-_:%&~\?\/.=]+/g,function(e){return e.link(e)});l=l.replace(/[#]+[A-Za-z0-9-_]+/g,function(e){return e.link("http://search.twitter.com/search?q="+encodeURIComponent(e))});l=l.replace(/[@]+[A-Za-z0-9-_]+/g,function(e){return e.link("http://twitter.com/"+e.replace("@",""))});var p='<div class="tweet"><a href="//twitter.com/'+a+'">'+'<img src="'+o+'" alt="'+a+'"/>'+"</a>"+'<p><a href="//twitter.com/'+a+'">'+u+" <small>@"+a+"</small> </a>"+l+c+"</p>"+"</div>";n.append(p)}})})});